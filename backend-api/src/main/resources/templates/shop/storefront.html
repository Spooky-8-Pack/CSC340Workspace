<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/storefront.css">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/login-panel.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">   
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${shop.shopName}">Shop Name</title>
</head>
<body>

    <nav class="navbar">
        <div class="nav-left">
            <a th:href="@{/index}"><img src="/assets/UNCG_Spartan_Head.png" style="width: 75px; height: 75px" alt="UNC Greensboro spartan logo"></a>
            <div class="menu-dropdown">
                <button class="menu-button">
                    <img src="/assets/white-menu-icon.png" style="width: 36px; height: 36px" alt="Menu icon"/>
                    <span>Categories</span>
                </button>
                <div class="menu-content">
                    <a href="#">Tops</a>
                    <a href="#">Bottoms</a>
                    <a href="#">Dresses & Sets</a>
                    <a href="#">Shoes</a>
                    <a href="#">Accessories</a>
                    <a href="#">Headwear</a>
                </div>
            </div>
        </div>

        <div class="nav-center">
            <!-- Search bar from https://codepen.io/huange/pen/bGqMqM -->
            <div class="search-container">
                <form action="#">
                    <input type="text" class="search-bar" placeholder="Search..">
                    <button class="search-button" type="submit"><i class="fa fa-search"></i></button>
                </form>
            </div>
        </div>

        <div class="nav-right">
            <div class="icons">
                <a id="profile" class="nav-button"
                th:href="@{/api/sellers/updateForm/{sellerId}(sellerId=${#authentication.principal.id})}">
                <i class="fa-solid fa-user"></i>
                </a>
                <a id="shop" class="nav-button"
                th:href="@{/api/sellers/{sellerId}/storefront(sellerId=${#authentication.principal.id})}">
                <i class="fa-solid fa-store"></i>
                </a>
                <a id="heart" class="nav-button"><i class="fa-solid fa-heart"></i></a>
                <a id="cart" class="nav-button"><i class="fa-solid fa-cart-shopping"></i></a>
            </div>
            
        </div>
        
    </nav>

    <section class="shop">
        
        <div class="shop-header">
            <img class="shop-image"
                th:src="${shop.shopImagePath != null ? '/shop-images/' + shop.shopImagePath : '/shop-images/No_Image_Available.jpg'}"
                alt="Shop Image">
            <div class="shop-details">
                <div class="location">
                    <h3>Location</h2>
                    <p th:text="${shop.location}"></p>
                </div>
                <div class="Rating">
                    <h3>Rating</h3>
                    <p>Nothing yet</p>
                </div>
                <a th:href="@{/api/sellers/{sellerId}/storefront(sellerId=${#authentication.principal.id})}">Edit Shop</a>
            </div>
            <div class="seller-info">
                <h2>Seller</h2>
                <img id="seller-image"
                    th:src="@{/seller-images/{img}(img=${seller.sellerImagePath} ?: 'No_Image_Available.jpg')}"
                    alt="Seller Image">
                <p th:text="${seller.name}">Seller Name</p>
            </div>
        </div>

        <div class="shop-stuff">
             <div class="btnContainer">
                <button class="filterBtn" data-filter="about" onclick="event.preventDefault(); filterSelection('about')">About</button>
                <button class="filterBtn active" data-filter="products" onclick="event.preventDefault(); filterSelection('products')">Products</button>
                <button class="filterBtn" data-filter="reviews" onclick="event.preventDefault(); filterSelection('reviews')">Reviews</button>
            </div>

            <div class="filter-container">

                <div class="about">
                    <p th:text="${shop.description}">Description</p>
                </div>

                <div class="products">
                    <div class="add-product">
                        <p>Add Product</p>
                        <button id="openModal"><i class="fa-solid fa-plus"></i></button>
                    </div>

                    <div class="product-container">
                        <div class="product-card" th:each="product : ${products}">
                            <div th:each="imgPath : ${product.imagePaths}">
                                <img th:src="@{'/products/' + ${imgPath}}"
                                    style="width: 200px; height: 200px">
                            </div>
                            <div th:if="${product.imagePaths == null or product.imagePaths.isEmpty()}">
                                <img th:src="@{/No_Image_Available.jpg}"
                                    style="width: 200px; height: 200px">
                            </div>
                            <div class="prod-details">
                                <p th:text="${product.name}">Name</p>
                                <p th:text="${product.price}">Price</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="reviews">
                    <div class="review-card">
                        <h3>${customer.name}</h3>
                        <p>Rating: ${customer.review.overallRating} </p>
                        <p>${customer.review.comment}</p>

                    </div>
                </div>
            </div>

        </div>

        <div id="productModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Add New Product</h2>
                <form id="product-form" th:action="@{/api/products/create}" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="shopId" th:value="${shop.id}"/>
                    
                    <label for="productImage">Images(s):</label>
                    <small>(Max 10)</small>
                    <input type="file" id="productImage" name="productImages" multiple accept="image/*">

                    <div id="imagePreview" class="preview-container"></div>

                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" required>

                    <label for="price">Price:</label>
                    <input type="number" id="price" name="price" step="0.01" required>

                    <label for="productCategory">Category:</label>
                    <select id="category" name="category" required>
                        <option th:value="TOPS">Tops</option>
                        <option th:value="BOTTOMS">Bottoms</option>
                        <option th:value="DRESSES">Dresses & Sets</option>
                        <option th:value="SHOES">Shoes</option>
                        <option th:value="ACCESSORIES">Accessories</option>
                        <option th:value="HEADWEAR">Headwear</option>
                    </select>

                    <label for="description" name="description">Description:</label>
                    <textarea id="description" name="description" rows="4" required></textarea>

                    <button type="submit">Add Product</button>
                </form>
            </div>

        </div>      

    </section>

    <!-- Footer from https://mdbootstrap.com/snippets/standard/mdbootstrap/2885027?view=side -->
    <footer
            class="text-center text-lg-start text-white"
            style="background-color: #FFB71B"
            >
        <!-- Grid container -->
        <div class="container p-4 pb-0">
        <!-- Section: Links -->
        <section class="">
            <!--Grid row-->
            <div class="row">
            <!-- Grid column -->
            <div class="col-md-3 col-lg-3 col-xl-3 mx-auto mt-3">
                <h6 class="text-uppercase mb-4 font-weight-bold">
                Spartan Thrift
                </h6>
                <p>
                The only online thrift shop at the University of North Carolina at Greensboro.
                </p>
            </div>
            <!-- Grid column -->

            <hr class="w-100 clearfix d-md-none" />

            <!-- Grid column -->
            <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mt-3">
                <h6 class="text-uppercase mb-4 font-weight-bold">Products</h6>
                <p>
                <a class="text-white">MDBootstrap</a>
                </p>
                <p>
                <a class="text-white">MDWordPress</a>
                </p>
                <p>
                <a class="text-white">BrandFlow</a>
                </p>
                <p>
                <a class="text-white">Bootstrap Angular</a>
                </p>
            </div>
            <!-- Grid column -->

            <hr class="w-100 clearfix d-md-none" />

            <!-- Grid column -->
            <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mt-3">
                <h6 class="text-uppercase mb-4 font-weight-bold">
                Useful links
                </h6>
                <p>
                <a class="text-white">Your Account</a>
                </p>
                <p>
                <a class="text-white" href="#">Become an Affiliate</a>
                </p>
                <p>
                <a class="text-white" href="#">Shipping Rates</a>
                </p>
                <p>
                <a class="text-white" href="#">Help</a>
                </p>
            </div>

            <!-- Grid column -->
            <hr class="w-100 clearfix d-md-none" />

            <!-- Grid column -->
            <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mt-3">
                <h6 class="text-uppercase mb-4 font-weight-bold">Contact</h6>
                <p><i class="fas fa-home mr-3"></i> Greensboro, NC 27412, US</p>
                <p><i class="fas fa-envelope mr-3"></i> example@gmail.com</p>
                <p><i class="fas fa-phone mr-3"></i> 000.000.000</p>
            </div>
            <!-- Grid column -->
            </div>
            <!--Grid row-->
        </section>
        <!-- Section: Links -->

        <hr class="my-3">

        <!-- Section: Copyright -->
        <section class="p-3 pt-0">
            <div class="row d-flex align-items-center">
            <!-- Grid column -->
            <div class="col-md-7 col-lg-8 text-center text-md-start">
                <!-- Copyright -->
                <div class="p-3">
                Â© 2020 Copyright:
                <a class="text-white" href="https://mdbootstrap.com/"
                    >MDBootstrap.com</a
                    >
                </div>
                <!-- Copyright -->
            </div>
            <!-- Grid column -->

            <!-- Grid column -->
            <div class="col-md-5 col-lg-4 ml-lg-0 text-center text-md-end">
                <!-- Facebook -->
                <a
                class="btn btn-outline-light btn-floating m-1 text-white"
                role="button"
                ><i class="fab fa-facebook-f"></i
                ></a>

                <!-- Twitter -->
                <a
                class="btn btn-outline-light btn-floating m-1 text-white"
                role="button"
                ><i class="fab fa-twitter"></i
                ></a>

                <!-- Google -->
                <a
                class="btn btn-outline-light btn-floating m-1 text-white"
                role="button"
                ><i class="fab fa-google"></i
                ></a>

                <!-- Instagram -->
                <a
                class="btn btn-outline-light btn-floating m-1 text-white"
                role="button"
                ><i class="fab fa-instagram"></i
                ></a>
            </div>
            <!-- Grid column -->
            </div>
        </section>
        <!-- Section: Copyright -->
        </div>
        <!-- Grid container -->
    </footer>

    <script src="/js/login-panel.js" defer></script>
    <script src="/js/storefront.js" defer></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            filterSelection("products");
        });
    </script>
       
</body>
</html>